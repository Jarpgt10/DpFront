import{r,A as k,j as e,f as E,P as w,I as j}from"./index-A4Tx_7PC.js";import{F as d,s as b}from"./index-CuNweiqr.js";import{I as f,B as A}from"./index-BK85Pz4X.js";import{I as P}from"./index-BzkMSKMX.js";import{S as F}from"./index-CFva4uUX.js";import{T as z,M as D}from"./Table-DobsLtV-.js";function T({data:s,onClose:c}){const{session:n}=r.useContext(k),a=r.useRef();a.current&&!s&&a.current.resetFields(),r.useEffect(()=>{a.current.resetFields()},[s]);const m=async u=>{const o={...u,id_menu_comida:s?s.id_menu_comida:0,estado:u.estado?1:0,id_usuario:n&&n.id_usuario};E(o).then(l=>{l.err?b.error(l.message):b.success(l.message)}).finally(()=>c())};return e.jsxs(d,{layout:"vertical",onFinish:m,ref:a,initialValues:s&&{estado:parseInt(s.estado)===1,nombre_menu:s.nombre_menu,detalle:s.detalle,precio:s.precio},children:[e.jsx(d.Item,{label:"Menu",name:"nombre_menu",rules:[{required:!0,message:"Ingrese Menu"}],children:e.jsx(f,{})}),e.jsx(d.Item,{label:"Detalle",name:"detalle",rules:[{required:!0,message:"Ingrese Detalle"}],children:e.jsx(f.TextArea,{})}),e.jsx(d.Item,{label:"Precio",name:"precio",rules:[{required:!0,message:"Ingrese Detalle"}],children:e.jsx(P,{precision:2})}),s&&e.jsx(d.Item,{label:"Estado",name:"estado",valuePropName:"checked",children:e.jsx(F,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"flex-end",children:e.jsx(A,{className:"button-submit",type:"default",htmlType:"submit",children:"Guardar"})})]})}function G(){const{loading:s,getAll:c,menu:n}=r.useContext(w),[a,m]=r.useState(""),[u,o]=r.useState(!1),[l,x]=r.useState(null),h=10,[g,C]=r.useState(1),I=(g-1)*h,M=I+h,p=n&&n.filter(t=>t.nombre_menu.toLowerCase().includes(a.toLowerCase())),_=p==null?void 0:p.slice(I,M),v=()=>{x(null),o(!1)},N=()=>{o(!1),x(null),c()},S=t=>{x(t),o(!0)},y=t=>{m(t.target.value)};return e.jsxs("div",{className:"h-screen px-[5%] py-[5%]",children:[e.jsx("div",{className:"title-1 flex-between",children:e.jsx("span",{children:"MENU"})}),e.jsxs("div",{className:"flex-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex-center gap-5",children:[e.jsx(j.reload,{size:25,onClick:()=>c(),className:"cursor-pointer"}),e.jsx(f.Search,{onChange:y}),e.jsx("button",{onClick:()=>o(!0),children:e.jsx(j.add,{size:25,color:"white",className:"bg-[#1f2937] bg-hover-3 rounded-full"})})]}),e.jsx("div",{})]}),e.jsx(z,{className:"mt-5",dataSource:_,loading:s,rowKey:"id_producto",columns:[{title:"No.",dataIndex:"id_menu_comida",key:"id_menu_comida"},{title:"Menu",dataIndex:"nombre_menu",key:"nombre_menu"},{title:"Precio",dataIndex:"precio",key:"precio",render:(t,i)=>e.jsxs("strong",{children:["Q ",i.precio]})},{title:"Estado",dataIndex:"estado",key:"estado",render:(t,i)=>e.jsx("strong",{className:`${parseInt(i.estado)===1?"text-green-600":"text-red-700"}`,children:parseInt(i.estado)===1?"Activo":"Inactivo"})},{title:"Editar",render:(t,i)=>e.jsx("strong",{className:"cursor-pointer",onClick:()=>S(i),children:e.jsx(j.edit,{className:"hover:text-gray-500 ",size:20})})}],pagination:{onChange:t=>C(t),pageSize:h,current:g,total:(n==null?void 0:n.length)||0}}),e.jsx(D,{open:u,footer:null,onCancel:()=>v(),title:e.jsxs("div",{children:[l?"Editar":"Crear"," Menu "]}),width:400,centered:!0,children:e.jsx(T,{data:l,onClose:()=>N()})})]})}export{G as default};
