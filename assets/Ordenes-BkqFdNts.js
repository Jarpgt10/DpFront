import{k as M,j as e,r as a,P as E,I as r}from"./index-BrDL3hP3.js";import{I as k}from"./index-CUdnEXv3.js";import{T as b,M as z}from"./Table-ALEJlV6n.js";const P="api/controllers/orden.php?",_=async(n=!0)=>{const o=await M(`${P}get-order=true&aActiveOnly=${n}`);return JSON.parse(o)};function T(){return e.jsx("div",{children:"ModalOrden"})}function A(){const[n,o]=a.useState([]);a.useContext(E);const[g,x]=a.useState(!1),[m,f]=a.useState(""),[C,l]=a.useState(!1),[h,i]=a.useState(null),c=10,[p,S]=a.useState(1),j=(p-1)*c,v=j+c,d=n&&n.filter(t=>t.titular.toLowerCase().includes(m.toLowerCase())),N=d==null?void 0:d.slice(j,v);a.useEffect(()=>{u()},[]);const u=async()=>{x(!0),await _().then(t=>o(t)).finally(()=>x(!1))},O=()=>{i(null),l(!1)},y=()=>{l(!1),i(null),u()},w=t=>{i(t),l(!0)},I=t=>{f(t.target.value)};return e.jsxs("div",{className:"h-screen px-[5%] py-[5%]",children:[e.jsx("div",{className:"title-1 flex-between",children:e.jsx("span",{children:"ORDENES"})}),e.jsxs("div",{className:"flex-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex-center gap-5",children:[e.jsx(r.reload,{size:25,onClick:()=>u(),className:"cursor-pointer"}),e.jsx(k.Search,{onChange:I}),e.jsx("button",{onClick:()=>l(!0),children:e.jsx(r.add,{size:25,color:"white",className:"bg-[#1f2937] bg-hover-3 rounded-full"})})]}),e.jsx("div",{})]}),e.jsx(b,{className:"mt-5",dataSource:N,loading:g,rowKey:"id_orden",columns:[{title:"No.",dataIndex:"id_orden",key:"id_orden"},{title:"Titular",dataIndex:"titular",key:"titular"},{title:"DirecciÃ³n",render:(t,s)=>e.jsx("strong",{children:parseInt(s.comer_aqui)===1?s.direccion:"Comer aca"})},{title:"Para",render:(t,s)=>e.jsx("strong",{children:parseInt(s.comer_aqui)===1?e.jsx(r.truck,{size:25}):e.jsx(r.store,{size:25})})},{title:"Total",render:(t,s)=>e.jsxs("strong",{children:["Q ",s.total]})},{title:"Editar",render:(t,s)=>e.jsx("strong",{className:"cursor-pointer",onClick:()=>w(s),children:e.jsx(r.eye,{className:"hover:text-gray-500 ",size:20})})}],pagination:{onChange:t=>S(t),pageSize:c,current:p,total:(n==null?void 0:n.length)||0}}),e.jsx(z,{open:C,footer:null,onCancel:()=>O(),title:e.jsxs("div",{children:[h?"Editar":"Crear"," Orden "]}),width:500,centered:!0,children:e.jsx(T,{data:h,onClose:()=>y()})})]})}export{A as default};
