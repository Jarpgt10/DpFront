import{r as n,A as D,f as F,j as e,F as w,B as O,ad as Y,P as R,ae as g}from"./index-DAciIoZG.js";import{s as M,I as z}from"./index-DyyB1ZxX.js";import{M as B}from"./index-Dgy6gC5J.js";function L({data:a,addOrUpdateFunction:x,formFields:l,onClose:h}){const{session:m}=n.useContext(D),r=n.useRef();r.current&&!a&&r.current.resetFields();const j={...a,fecha_vencimiento:a&&a.fecha_vencimiento?F(a.fecha_vencimiento,"YYYY-MM-DD"):null};n.useEffect(()=>{r.current.resetFields()},[a]);const f=async t=>{const i={...a,...t,estado:t.estado?1:0,id_usuario:m&&m.id_usuario,fecha_vencimiento:t.fecha_vencimiento?Y(t.fecha_vencimiento):""};x(i).then(c=>{c.err?M.error(c.message):M.success(c.message)}).finally(()=>h())};return e.jsxs(w,{layout:"vertical",onFinish:f,ref:r,initialValues:a&&j,children:[l.map((t,i)=>e.jsx(w.Item,{label:t.label,name:t.name,rules:t.rules,valuePropName:t.valuePropName,children:t.component},i)),e.jsx("div",{className:"flex-end",children:e.jsx(O,{className:"button-submit",type:"default",htmlType:"submit",children:"Guardar"})})]})}function T({pageSize:a,object:x,columns:l,title:h,rowKey:m,addOrUpdateFunction:r,formFields:j,filterBy:f}){const{loading:t,getAll:i}=n.useContext(R),[c,u]=n.useState(!1),[v,y]=n.useState(null),[d,N]=n.useState(1),[k,S]=n.useState(""),b=(d-1)*a,C=b+a,I=()=>{y(null),u(!1)},_=()=>{u(!1),y(null),i()},A=s=>{y(s),u(!0)},P=s=>{S(s.target.value)},p=x&&x.filter(s=>s[f].toLowerCase().includes(k.toLowerCase())),E=p==null?void 0:p.slice(b,C);return e.jsxs("div",{className:`h-screen \r
        sm:px-[3%] sm:py-[20%]\r
        md:px-[5%] md:py-[5%]\r
        lg:px-[5%] lg:py-[5%]\r
        xl:px-[5%] xl:py-[5%]`,children:[e.jsx("div",{className:`title-1 flex \r
                            sm:justify-center\r
                            md:justify-center\r
                            lg:justify-between\r
                            xl:justify-between`,children:e.jsx("span",{children:h})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx(g.reload,{size:25,onClick:()=>i(),className:"cursor-pointer"}),e.jsx(z.Search,{onChange:P}),e.jsx("button",{onClick:()=>u(!0),children:e.jsx(g.add,{size:25,color:"white",className:"bg-[#1f2937] hover:bg-[#374151] rounded-full"})})]}),e.jsx("div",{})]}),e.jsx("div",{className:"overflow-x-auto mt-5",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-[#1f2937]",children:e.jsxs("tr",{children:[l.map(s=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:s.title},s.dataIndex||s.key)),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Editar"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:l.length+1,className:"text-center py-4",children:"Cargando..."})}):E.map(s=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[l.map(o=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.render?o.render(s,s):s[o.dataIndex]},o.dataIndex||o.key)),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:e.jsx("strong",{className:"cursor-pointer",onClick:()=>A(s),children:e.jsx(g.edit,{className:"hover:text-gray-500",size:20})})})]},s[m]))})]})}),e.jsxs("div",{className:"mt-4 flex justify-center",children:[e.jsx("button",{onClick:()=>N(d-1),disabled:d===1,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50",children:"Anterior"}),e.jsx("span",{className:"px-4 py-2",children:d}),e.jsx("button",{onClick:()=>N(d+1),disabled:C>=p.length,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50",children:"Siguiente"})]}),e.jsx(B,{open:c,footer:null,onCancel:()=>I(),title:e.jsxs("div",{children:[v?"Editar":"Crear"," ",h," "]}),width:300,centered:!0,children:e.jsx(L,{data:v,addOrUpdateFunction:r,formFields:j,onClose:()=>_()})})]})}export{T as A};
